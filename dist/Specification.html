<!DOCTYPE html>
<!-- Built with spec-md https://spec-md.com -->
<html>
<head><meta charset="utf-8">
<title>HertzScript Systems Specification</title>
<style>body {
  color: #333333;
  font: 13pt/18pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  margin: 6rem auto 3rem;
  max-width: 780px;
}

/* Selections */

.outdated-selection-link,
.selection-link {
  position: absolute;
  display: block;
  color: #fff;
  background: #cacee0;
  border-radius: 4px;
  font-size: 36px;
  height: 23px;
  line-height: 48px;
  text-align: center;
  text-decoration: none;
  width: 25px;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}

.outdated-selection-link:hover,
.selection-link:hover {
  text-decoration: none;
}

.outdated-selection-link:before,
.selection-link:before {
  border: 5px solid transparent;
  border-left-color: #cacee0;
  border-right: 0;
  content: '';
  height: 0;
  margin-top: -5px;
  margin-right: -5px;
  position: absolute;
  right: 1px;
  top: 50%;
  width: 0;
}

.selection-link:hover {
  background: #3b5998;
}

.selection-link:hover:before {
  border-left-color: #3b5998;
}

.outdated-selection-link {
  background: #f0babe;
  font-size: 21px;
  font-weight: 800;
  line-height: 27px;
}

.outdated-selection-link:before {
  border-left-color: #f0babe;
}

.outdated-selection-link:hover:after {
  content: "This selection content has changed since this link was created.";
  font: 9pt/11pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  position: absolute;
  display: block;
  white-space: nowrap;
  padding: 2px 5px 1px;
  top: -20px;
  background: black;
  color: white;
}

/* Links */

a {
  color: #3B5998;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}


/* Section headers */

h1, h2, h3, h4, h5, h6, h7, h8 {
  font-weight: bold;
  margin: 3em 0 1em;
  position: relative;
}

h1 {
  font-size: 1.5em;
  margin: 6em 0 3em;
}

h2 {
  font-size: 1.5em;
  margin-top: 5em;
}

h3, h4 {
  font-size: 1.25em;
}

h5, h6 {
  font-size: 1em;
}

section.subsec > h6 {
  margin-top: 2em;
}

section.subsec > h6 > a {
  color: #333333;
}

section .spec-secid {
  margin-right: 1ex;
  position: absolute;
  right: 100%;
  text-align: right;
  white-space: nowrap;
}

footer {
  font-size: 75%;
  opacity: 0.5;
  text-align: center;
  margin-top: 12rem;
}


/* Table of contents */

.spec-toc {
  margin: 1rem 0 3rem;
}

.spec-toc .title {
  content: 'Contents';
  display: block;
  font-weight: bold;
  margin: 5em 0 1em;
}

.spec-toc .spec-secid {
  margin-right: 1ex;
}

.spec-toc ol {
  list-style: none;
  padding-left: 0;
}

.spec-toc ol ol {
  list-style: none;
  padding-left: 2ex;
}

.spec-toc li {
  position: relative;
  padding: 5px 0 0 30px;
  margin: -5px 0 0 -30px;
}

.spec-toc a {
  color: #333333;
}

.spec-toc a:hover {
  text-decoration: none;
}

.spec-toc a .spec-secid {
  color: #3B5998;
}

.spec-toc a:hover .spec-secid {
  text-decoration: underline;
}

.spec-toc .toggle {
  display: none;
}

.spec-toc .toggle + label {
  cursor: pointer;
  left: 10px;
  opacity: 1;
  padding: 3px 5px 3px 6px;
  position: absolute;
  top: 8px;
  transform: rotate(0deg);
  transition: all 0.18s ease-in-out;
}

.spec-toc .toggle + label:after {
  border-color: transparent transparent transparent #bbc;
  border-style: solid;
  border-width: 6px 0 6px 7px;
  content: ' ';
  display: block;
  height: 0;
  width: 0;
}

.spec-toc .toggle:checked + label {
  transform: rotate(90deg);
}

.spec-toc li:not(:hover) > .toggle:checked + label {
  opacity: 0;
}

.spec-toc .toggle:not(:checked) ~ ol {
  max-height: 0;
  overflow: hidden;
}


/* Sidebar */

.spec-sidebar-toggle {
  display: none;
}

.spec-sidebar-toggle + label {
  position: fixed;
  right: 0;
  top: 0;
  padding: 10px 15px;
  font-size: 30px;
  color: rgba(0,0,0,0.7);
  z-index: 2;
  cursor: pointer;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}

.spec-sidebar {
  display: none;
  position: fixed;
  right: 0;
  top: 0;
  width: 320px;
  font-size: 80%;
  overflow-y: scroll;
  height: 100%;
  padding: 0 0 5rem 30px;
  box-sizing: border-box;
  background: #f0f0f0;
}

.spec-sidebar {
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}

.spec-sidebar-toggle:checked ~ .spec-sidebar {
  display: block;
  box-shadow:
    -1px 0 rgba(0,0,0,0.12),
    -4px 0 8px -2px rgba(0,0,0,0.05);
}

.spec-sidebar .viewing > a:after {
  color: #8b9;
  content: '\2022';
  margin-left: 1ex;
}

@media (min-width: 1240px) {
  .spec-sidebar-toggle + label {
    display: none;
  }

  .spec-sidebar {
    display: block;
    box-shadow:
      inset 1px 0 rgba(0,0,0,0.05),
      inset 4px 0 8px -2px rgba(0,0,0,0.08) !important;
  }

  body {
    padding-right: 300px;
  }
}


/* Notes */

.spec-note {
  background: #FEFEF3;
  border-left: solid 4px #F4E925;
  margin: 1em -1em;
  min-width: 416px;
  padding: 1ex 1em 1ex calc(1em - 4px);
  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content;
}

.spec-note > a:first-child {
  color: #6C6613;
  display: block;
  font: italic 11pt/18pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  opacity: 0.6;
  user-select: none;
}


/* Todos */

.spec-todo {
  color: #666666;
  margin: 1em 0 1em 5em;
  min-height: 1em;
}

.spec-todo::before {
  content: 'todo';
  display: block;
  float: left;
  margin-left: -5em;
  text-transform: uppercase;
}

/* Index table */

.spec-index ol {
  list-style-type: none;
  margin: 0 0 0 2rem;
  padding: 0;
  column-width: 210px;
  column-gap: 2rem;
}

.spec-index ol li {
  width: min-content;
}

/* Code */

code {
  background: #FAFAFA;
  font-family: Consolas, Monaco, monospace;
  font-size: 85%;
  font-weight: inherit;
  margin: -2px -1px;
  padding: 3px 3px;
  white-space: pre;
}

pre code {
  background: none;
  font-weight: inherit;
  margin: 0;
  padding: 0;
}

pre {
  background: #FAFAFA;
  border-left: solid 4px #E9E9E9;
  margin: 1em -1em;
  min-width: 40ch;
  padding: 1ex 1em 1ex calc(1em - 4px);
  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content;
}

.spec-example {
  background: #FAFAFF;
  border-left: solid 4px #BBBBFF;
}

.spec-counter-example {
  background: #FFFAFA;
  border-left: solid 4px #FFBBBB;
}

.spec-example > a,
.spec-counter-example > a {
  display: block;
  font: italic 11pt/18pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  opacity: 0.6;
  user-select: none;
}

.spec-counter-example > a {
  color: #98593b;
}


/* Tables */

table {
  border-collapse: collapse;
}

th {
  background-color: #F9F9F9;
}

td, th {
  border: 1px solid #D0D0D0;
  padding: 0.4em;
  vertical-align: baseline;
}


/* Edits */

ins {
  background-color: rgba(0, 200, 30, 0.08);
  text-decoration: none;
}

del {
  background-color: rgba(200, 0, 0, 0.08);
}

.spec-added, .spec-removed {
  border-left: 4px solid;
  margin-left: -18px;
  padding-left: 14px;
}

.spec-added {
  border-color: #396;
}

.spec-removed {
  border-color: #933;
  text-decoration: line-through;
}


/* Values */

.spec-keyword {
  font-weight: bold;
}

.spec-string {
  font-family: Consolas, Monaco, monospace;
  font-size: 85%;
  white-space: pre;
}

var {
  font-style: italic;
}

*[data-name] {
  transition: 0.15s background ease-out;
  border-radius: 2px;
  padding: 0 3px;
  margin: 0 -3px;
}


/* Grammar semantics, algorithms and calls */

.spec-semantic,
.spec-algo {
  margin: 1rem 0 1rem 2rem;
}

.spec-semantic > .spec-rhs {
  display: inline-block;
  margin-left: 1ex;
}

.spec-semantic > .spec-nt::after,
.spec-algo > .spec-call:first-child::after {
  content: ':';
  font-style: normal;
  font-weight: bold;
  margin-left: 1ex;
}

.spec-semantic ol, .spec-semantic ol ol ol ol,
.spec-algo ol, .spec-algo ol ol ol ol {
  list-style-type: decimal;
}

.spec-semantic ol ol, .spec-semantic ol ol ol ol ol,
.spec-algo ol ol, .spec-algo ol ol ol ol ol {
  list-style-type: lower-alpha;
}

.spec-semantic ol ol ol, .spec-semantic ol ol ol ol ol ol,
.spec-algo ol ol ol, .spec-algo ol ol ol ol ol ol {
  list-style-type: lower-roman;
}

.spec-call > a {
  color: inherit;
}


/* Grammar productions */

.spec-production {
  margin: 1rem 0 1rem 2rem;
}

.spec-production > .spec-nt::after {
  content: ':';
  font-style: normal;
  font-weight: bold;
  margin: 0 1ex;
}

.spec-semantic.d2 > .spec-nt::after,
.spec-production.d2 > .spec-nt::after {
  content: '::';
}

.spec-semantic.d3 > .spec-nt::after,
.spec-production.d3 > .spec-nt::after {
  content: ':::';
}

.spec-rhs {
  margin-left: 2rem;
}

.spec-oneof {
  display: inline;
}

.spec-oneof::before {
  content: 'one of';
  font-style: normal;
  font-weight: bold;
}

.spec-oneof > table {
  margin-left: 2rem;
}

.spec-oneof .spec-rhs {
  border: none;
  margin: 0;
  padding: 0 0.5em;
  vertical-align: baseline;
}

.spec-rhs .spec-constrained:not(:first-child),
.spec-rhs .spec-quantified:not(:first-child),
.spec-rhs .spec-nt:not(:first-child),
.spec-rhs .spec-t:not(:first-child),
.spec-rhs .spec-rx:not(:first-child),
.spec-rhs .spec-prose:not(:first-child),
.spec-rhs .spec-empty:not(:first-child),
.spec-rhs .spec-lookahead:not(:first-child) {
  margin-left: 1ex;
}

.spec-condition {
  font-size: 85%;
}

.spec-condition::before {
  content: '[if '
}

.spec-condition.not::before {
  content: '[if not '
}

.spec-condition::after {
  content: ']'
}

.spec-empty,
.spec-prose {
  color: #666666;
}

.spec-nt {
  font-style: italic;
}

.spec-nt > a {
  color: inherit;
}

.spec-quantifiers,
.spec-params {
  font-size: 65%;
  font-style: normal;
  vertical-align: sub;
}

.spec-quantifier.list {
  color: #3348D3;
}

.spec-quantifier.optional {
  color: #83238E;
}

.spec-params,
.spec-condition {
  color: #1C7758;
}

.spec-params::before {
  content: '[';
}

.spec-params::after {
  content: ']';
}

.spec-quantifier:not(:last-child)::after,
.spec-param:not(:last-child)::after {
  color: #666666;
  content: ', ';
}

.spec-param.conditional::before {
  content: '?';
}

.spec-param.negated::before {
  content: '!';
}

.spec-t, .spec-rx {
  color: #333333;
  font-family: monospace;
  font-weight: bold;
}

.spec-butnot::before {
  color: #666666;
  content: 'but not';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-weight: normal;
  margin-right: 1ex;
}

.spec-butnot > *:not(:first-child)::before {
  color: #666666;
  content: 'or';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-weight: normal;
  margin-right: 1ex;
}

.spec-rhs .spec-oneof::before,
.spec-rhs .spec-butnot::before {
  margin-left: 1ex;
}

.spec-lookahead > * {
  margin: 0 !important;
}

.spec-lookahead > *:not(:first-child)::before {
  color: #666666;
  content: ', ';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-style: normal;
  font-weight: normal;
}

.spec-lookahead::before {
  color: #666666;
  content: '[lookahead = ';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-style: normal;
  font-weight: normal;
}

.spec-lookahead.not::before {
  content: '[lookahead \2260  ';
}

.spec-lookahead.set::before {
  content: '[lookahead \2208  {';
  margin-right: 0;
}

.spec-lookahead.set.not::before {
  content: '[lookahead \2209  {';
}

.spec-lookahead.ntset::before {
  content: '[lookahead \2208  ';
  margin-right: 0;
}

.spec-lookahead.ntset.not::before {
  content: '[lookahead \2209  ';
}

.spec-lookahead::after {
  color: #666666;
  content: ']';
}

.spec-lookahead.set::after {
  content: '}]';
}
</style>
<style>/* Copied from node_modules/prismjs/themes/prism.css */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
<script>(function(){var e,t=document.getElementsByTagName("style")[0].sheet;function n(){e&&(t.deleteRule(e),e=void 0)}document.documentElement.addEventListener("mouseover",(function(a){var u,d=a.target.attributes["data-name"];d&&(u=d.value,n(),e=t.insertRule('*[data-name="'+u+'"] { background: #FBF8D0; }',t.cssRules.length))})),document.documentElement.addEventListener("mouseout",n);})()</script>
<script>(function(){var e,n,t,o,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function a(e){c(new URL(e.target.href))}function i(){c(window.location)}function c(e){var n=e.hash.match(/^#sel-([A-Za-z0-9-_]+)$/);if(n){o=n[1];var a=(t=function(e){for(var n=new Array(64),t=0;t<64;t++)n[r.charCodeAt(t)]=t;var o=0,a=m(),i=m(),c=m(),d=w(),l=i.pop(),f=u(a.concat(i)),h=c.pop(),g=u(a.concat(c)),v=document.createRange();return v.setStart(f,l),v.setEnd(g,h),v.isOutdated=void 0!==d&&d!==s(v.toString()),v;function w(){for(var t=0,r=0;o<e.length;){var a=n[e.charCodeAt(o++)];if(t|=(31&a)<<r,r+=5,a<32)return t}}function m(){var e=w();if(null!=e){for(var n=new Array(e),t=0;t<e;t++)n[t]=w();return n}}}(o)).getBoundingClientRect(),i=Math.max(20,Math.floor(.4*(window.innerHeight-a.height)));window.scrollTo(0,window.scrollY+a.y-i);var c=document.getSelection();c.empty(),c.addRange(t),d()}}function d(){n||(n=document.getElementsByTagName("article")[0]),e||(e=document.createElement("a"),document.body.appendChild(e)),e.href="#sel-"+o,e.onclick=a,e.className=t.isOutdated?"outdated-selection-link":"selection-link",e.innerText=t.isOutdated?"!":"‟";var r=n.getBoundingClientRect().x,i=t.getBoundingClientRect().y;e.style.left=Math.floor(r+window.scrollX-37)+"px",e.style.top=Math.floor(i+window.scrollY-3)+"px"}function l(e){for(var n=[];e!=document.body;){var t=e.parentNode;n.push(Array.prototype.indexOf.call(t.childNodes,e)),e=t}return n.reverse()}function u(e){for(var n=document.body,t=0;t<e.length&&n;t++)n=n.childNodes[e[t]];return n}function s(e){for(var n=2166136261,t=0;t<e.length;++t)n^=e.charCodeAt(t),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return 32767&(n>>15^n)}document.addEventListener("selectionchange",(function(n){var a=document.getSelection();if(a.isCollapsed)e&&(e.parentNode.removeChild(e),e=null);else{var i=a.getRangeAt(0);t&&0===i.compareBoundaryPoints(Range.START_TO_START,t)&&0===i.compareBoundaryPoints(Range.END_TO_END,t)||(o=function(e){var n="",t=l(e.startContainer),o=l(e.endContainer),a=function(e,n){var t=0;for(;t<e.length&&t<n.length&&e[t]===n[t];)t++;return e.slice(0,t)}(t,o);return c(a),c(t.slice(a.length).concat(e.startOffset)),c(o.slice(a.length).concat(e.endOffset)),i(s(e.toString())),n;function i(e){do{n+=r[31&e|(e>31?32:0)],e>>=5}while(e>0)}function c(e){i(e.length);for(var n=0;n<e.length;n++)i(e[n])}}(t=i),d())}})),window.addEventListener("resize",d),window.addEventListener("hashchange",i),window.addEventListener("load",i);})()</script>
</head>
<body><article>
<header>
<h1>HertzScript Systems Specification</h1>
<section id="intro">
<section id="sec-WORK-IN-PROGRESS" class="subsec">
<h6><a href="#sec-WORK-IN-PROGRESS" title="link to this subsection">WORK IN PROGRESS</a></h6>
<div class="spec-todo">
Add sequence and dependency graphs.</div>
</section>
</section>
<nav class="spec-toc">
<div class="title">Contents</div>
<ol>
<li><a href="#sec-High-Level-Synopsis"><span class="spec-secid">1</span>High-Level Synopsis</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_1" /><label for="_toggle_1"></label>
<ol>
<li><a href="#sec-Overview-of-Components"><span class="spec-secid">1.1</span>Overview of Components</a></li>
</ol>
</li>
<li><a href="#sec-Literal-Value-Data-Types"><span class="spec-secid">2</span>Literal Value Data Types</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_2" /><label for="_toggle_2"></label>
<ol>
<li><a href="#sec-Notational-Conventions"><span class="spec-secid">2.1</span>Notational Conventions</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_2.1" /><label for="_toggle_2.1"></label>
<ol>
<li><a href="#sec-Object"><span class="spec-secid">2.1.1</span>Object</a></li>
<li><a href="#sec-Symbol"><span class="spec-secid">2.1.2</span>Symbol</a></li>
<li><a href="#sec-String"><span class="spec-secid">2.1.3</span>String</a></li>
<li><a href="#sec-Boolean"><span class="spec-secid">2.1.4</span>Boolean</a></li>
<li><a href="#sec-Integer"><span class="spec-secid">2.1.5</span>Integer</a></li>
<li><a href="#sec-Float"><span class="spec-secid">2.1.6</span>Float</a></li>
<li><a href="#sec-Null"><span class="spec-secid">2.1.7</span>Null</a></li>
<li><a href="#sec-Undefined"><span class="spec-secid">2.1.8</span>Undefined</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Compiler"><span class="spec-secid">3</span>Compiler</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_3" /><label for="_toggle_3"></label>
<ol>
<li><a href="#sec-Transformation-Functions"><span class="spec-secid">3.1</span>Transformation Functions</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_3.1" /><label for="_toggle_3.1"></label>
<ol>
<li><a href="#sec-HzCoroutine"><span class="spec-secid">3.1.1</span>HzCoroutine</a></li>
</ol>
</li>
<li><a href="#sec-Visitor-Functions"><span class="spec-secid">3.2</span>Visitor Functions</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_3.2" /><label for="_toggle_3.2"></label>
<ol>
<li><a href="#sec-CallExpression"><span class="spec-secid">3.2.1</span>CallExpression</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-DetourLib"><span class="spec-secid">4</span>DetourLib</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_4" /><label for="_toggle_4"></label>
<ol>
<li><a href="#sec-Detour-Hooking-Functions"><span class="spec-secid">4.1</span>Detour Hooking Functions</a></li>
</ol>
</li>
<li><a href="#sec-Kernelizer"><span class="spec-secid">5</span>Kernelizer</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_5" /><label for="_toggle_5"></label>
<ol>
<li><a href="#sec-Kernelizer.Constructor"><span class="spec-secid">5.1</span>Constructor</a></li>
<li><a href="#sec-Prototype-Methods"><span class="spec-secid">5.2</span>Prototype Methods</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_5.2" /><label for="_toggle_5.2"></label>
<ol>
<li><a href="#sec-reset"><span class="spec-secid">5.2.1</span>reset</a></li>
<li><a href="#sec-set"><span class="spec-secid">5.2.2</span>set</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-InstructionToken"><span class="spec-secid">6</span>InstructionToken</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_6" /><label for="_toggle_6"></label>
<ol>
<li><a href="#sec-InstructionToken.Constructor"><span class="spec-secid">6.1</span>Constructor</a></li>
</ol>
</li>
<li><a href="#sec-TokenLib"><span class="spec-secid">7</span>TokenLib</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_7" /><label for="_toggle_7"></label>
<ol>
<li><a href="#sec-Object-Methods"><span class="spec-secid">7.1</span>Object Methods</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_7.1" /><label for="_toggle_7.1"></label>
<ol>
<li><a href="#sec-isKernelized"><span class="spec-secid">7.1.1</span>isKernelized</a></li>
</ol>
</li>
<li><a href="#sec-Object-Properties"><span class="spec-secid">7.2</span>Object Properties</a>
<input hidden class="toggle" type="checkbox" checked id="_toggle_7.2" /><label for="_toggle_7.2"></label>
<ol>
<li><a href="#sec-tokens"><span class="spec-secid">7.2.1</span>tokens</a></li>
<li><a href="#sec-symbols"><span class="spec-secid">7.2.2</span>symbols</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-UserLib"><span class="spec-secid">8</span>UserLib</a></li>
<li><a href="#sec-VirtualMachine"><span class="spec-secid">9</span>VirtualMachine</a></li>
<li><a href="#sec-Dispatcher"><span class="spec-secid">10</span>Dispatcher</a></li>
<li><a href="#sec-Programming-Environment"><span class="spec-secid">11</span>Programming Environment</a></li>
<li><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</nav>
</header>
<section id="sec-High-Level-Synopsis" secid="1">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-High-Level-Synopsis">1</a></span>High-Level Synopsis</h2>
<p>HertzScript (abbreviated &ldquo;HzScript&rdquo;) automatically transforms JavaScript functions into stackless coroutines which can be preempted, and provides a degree of concurrency which is more fine&#8208;grained than what you get with traditional JavaScript. Normally functions must run from beginning to end due to the single&#8208;threaded nature of JavaScript, but HertzScript automatically pauses and context switches between several functions mid&#8208;execution. Software developers may utilize HertzScript&rsquo;s concurrency via a new <code>spawn</code> keyword. If you call a function which is preceded by the <code>spawn</code> keyword, then the function will run concurrently alongside any other functions and the caller function.</p>
<p>Coroutines are normally reserved for cooperative multitasking and have to be manually implemented by software developers, requiring them to manage control yielding and reentry points. HertzScript implements voluntary preemptive multitasking which is a compiler&#8208;managed variant of cooperative multitasking, and it does not require the developer to manually implement control yielding or reentry points.</p>
<section id="sec-Overview-of-Components" secid="1.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Overview-of-Components">1.1</a></span>Overview of Components</h3>
<p>HertzScript is composed of layered abstracting and interoperating systems including a compiler, virtual machine, multitasking dispatcher, and programming environment. Each component can be used either independently or as part of a higher&#8208;level abstracting component. The lowest&#8208;level foundational components are the compiler and the virtual machine.</p>
<p><img src="http://g.gravizo.com/svg?%0A%09digraph%20Components%20%7B%0A%09%09Compiler%20%5Bshape=box%5D;%0A%09%09VirtualMachine%20%5Bshape=box%5D;%0A%09%09Dispatcher%20%5Bshape=box%5D;%0A%09%09Environment%20%5Bshape=box%5D;%0A%09%09Compiler%20-%3E%20VirtualMachine;%0A%09%09VirtualMachine%20-%3E%20Dispatcher;%0A%09%09Dispatcher%20-%3E%20Environment;%0A%09%09%7B%0A%09%09%09rank=same;%20Compiler%20VirtualMachine%20Dispatcher%20Environment%0A%09%09%7D%0A%09%7D%0A" alt="Component Diagram"/></p>
</section>
</section>
<section id="sec-Literal-Value-Data-Types" secid="2">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Literal-Value-Data-Types">2</a></span>Literal Value Data Types</h2>
<section id="sec-Notational-Conventions" secid="2.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Notational-Conventions">2.1</a></span>Notational Conventions</h3>
<p>Specific conventions for the notation of typed literal values are defined here and are used throughout this specification. Some special characters indicated within this section are Markdown terminal characters.</p>
<p>Notating a literal value with a specific data type may require the prefixing and/or postfixing of specific characters.</p>
<p>When contributing to this specification&rsquo;s Markdown documents via a text editor, each reference to a literal value requires grave accents to be the outermost prefix and postfix: ` (<code>U+0060</code>)</p>
<p>The below table illustrates the following for each data type:</p>
<ul>
<li>The name of the data type.</li>
<li>Special characters and their Unicode charcodes in parentheses.</li>
<li>The positions where the special characters should be relative to the notation of the value.</li>
<li>An unformatted Markdown example which a reader would observe in a plain&#8208;text editor.</li>
<li>A formatted example which a reader would observe when viewing the rendered distribution of this specification.</li>
</ul>
<table>
<thead><tr>
<th>Type</th>
<th>Characters</th>
<th>Position of Characters</th>
<th>Unformatted Example</th>
<th>Formatted Example</th>
</tr></thead>
<tbody>
<tr>
<td>Object </td><td>Percent Sign: <code>%</code> (<code>U+0025</code>) </td><td>Prefix &amp; Postfix </td><td>`%name%` </td><td><code>%name%</code></td></tr>
<tr>
<td>Symbol </td><td>Commercial At: <code>@</code> (<code>U+0040</code>) </td><td>Prefix </td><td>`@name` </td><td><code>@name</code></td></tr>
<tr>
<td><code>TokenLib</code> Symbol </td><td>2x Commercial At: <code>@@</code> (<code>U+0040</code>) </td><td>Prefix </td><td>`@@name` </td><td><code>@@name</code></td></tr>
<tr>
<td>String </td><td>Quotation Mark: <code>&quot;</code> (<code>U+0022</code>) </td><td>Prefix &amp; Postfix </td><td>`&ldquo;string&rdquo;` </td><td><code>&quot;string&quot;</code></td></tr>
<tr>
<td>Boolean </td><td>None </td><td>None </td><td>`true` </td><td><code>true</code></td></tr>
<tr>
<td>Integer </td><td>None </td><td>None </td><td>`123` </td><td><code>123</code></td></tr>
<tr>
<td>Float </td><td>Full Stop: <code>.</code> (<code>U+002E</code>) </td><td>Anywhere </td><td>`12.34` </td><td><code>12.34</code></td></tr>
<tr>
<td>Negative Integer </td><td>Minus Sign: <code>-</code> (<code>U+2212</code>) </td><td>Prefix </td><td>`-123` </td><td><code>-123</code></td></tr>
<tr>
<td>Negative Float </td><td>Minus Sign: <code>-</code> (<code>U+2212</code>) </td><td>Prefix </td><td>`-12.34` </td><td><code>-12.34</code></td></tr>
<tr>
<td>Null </td><td>None </td><td>None </td><td>`null` </td><td><code>null</code></td></tr>
<tr>
<td>Undefined </td><td>None </td><td>None </td><td>`undefined` </td><td><code>undefined</code></td></tr>
</tbody>
</table>
<section id="sec-Object" secid="2.1.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Object">2.1.1</a></span>Object</h4>
<p>Objects are logical collections of properties. Each property associates a key value with an arbitrary value.</p>
<p>Property key values can be used to access or assign properties and their associated arbitrary values.</p>
<p>Objects must be both prefixed and postfixed by percent signs.</p>
</section>
<section id="sec-Symbol" secid="2.1.2">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Symbol">2.1.2</a></span>Symbol</h4>
<p>Symbols are uniqueness types, meaning every symbol is immutable and unique. Symbols are used as dynamic property keys for Objects.</p>
<p>Symbols are prefixed by a single &ldquo;commercial at&rdquo; characer.</p>
<p>A Symbol that is created by and is a member of <a href="#sec-TokenLib"><code>TokenLib.symbols</code></a> is prefixed by two &ldquo;commercial at&rdquo; characters.</p>
</section>
<section id="sec-String" secid="2.1.3">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-String">2.1.3</a></span>String</h4>
<p>Strings are finite ordered sequences of zero or more 16&#8208;bit unsigned integer values.</p>
<p>Strings must be both prefixed and postfixed by quotation marks.</p>
</section>
<section id="sec-Boolean" secid="2.1.4">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Boolean">2.1.4</a></span>Boolean</h4>
<p>Booleans must be equal to one of two different values: <code>true</code> or <code>false</code>.</p>
</section>
<section id="sec-Integer" secid="2.1.5">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Integer">2.1.5</a></span>Integer</h4>
<p>Integers are whole numbers represented by double&#8208;precision 64&#8208;bit binary format IEEE 754&#8208;2008 values.</p>
<p>Integers which are negative must be notated with a minus sign prefix. Integers which both non&#8208;terminating and infinitely large must be notated with <code>Infinity</code>, or <code>-Infinity</code> for negative numbers.</p>
</section>
<section id="sec-Float" secid="2.1.6">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Float">2.1.6</a></span>Float</h4>
<p>Floats are non&#8208;whole numbers which are represented by double&#8208;precision 64&#8208;bit binary format IEEE 754&#8208;2008 values.</p>
<p>Floats which are negative must be notated with a minus sign prefix.</p>
</section>
<section id="sec-Null" secid="2.1.7">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Null">2.1.7</a></span>Null</h4>
<p><code>null</code> is unchangeable and is always equal to <code>null</code>.</p>
</section>
<section id="sec-Undefined" secid="2.1.8">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-Undefined">2.1.8</a></span>Undefined</h4>
<p><code>undefined</code> is unchangeable and is always equal to <code>undefined</code>.</p>
</section>
</section>
</section>
<section id="sec-Compiler" secid="3">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Compiler">3</a></span>Compiler</h2>
<p>The HertzScript compiler transforms function calls into yielded instances of <code>InstructionToken</code> such that all transformed function calls are made in reverse upon script execution.</p>
<p>The HertzScript compiler uses a multi&#8208;stage source&#8208;to&#8208;source compilation process to transform JavaScript functions into instruction streams; all functions within a HzScript program are GeneratorFunctions which yield instructions. Residing the bottom abstraction level of the system, the HertzScript compiler serves as a fundamental mechanism in the creation of re&#8208;entrant programs.</p>
<p>The first stage in the compilation process consists of Acorn, an Acorn parser plugin, and Acorn&#8208;Walk, which are used to parse and transform any <code>SpawnExpression</code> to a regular method call for Babel to recognize in the second stage. <code>spawn</code> is a contextual keyword which could also be a regular method call and not a <code>SpawnExpression</code>, so the parser looks for any instance of the <code>spawn</code> keyword followed by any number of spaces and an identifier character.</p>
<p>The second stage consists of Babel and a Babel transformation plugin which is used to transform all function expressions/statements into GeneratorFunctions, and wrap all functions in detour hooking functions. Within the new GeneratorFunctions all CallExpressions, NewExpressions, ReturnStatements, YieldExpressions, and SpawnExpressions are transformed into yielded instruction tokens. A special token named <code>loopYield</code> is added to the beginning of each loop to ensure that they are interruptable.</p>
<section id="sec-Transformation-Functions" secid="3.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Transformation-Functions">3.1</a></span>Transformation Functions</h3>
<section id="sec-HzCoroutine" secid="3.1.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-HzCoroutine">3.1.1</a></span>HzCoroutine</h4>
</section>
</section>
<section id="sec-Visitor-Functions" secid="3.2">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Visitor-Functions">3.2</a></span>Visitor Functions</h3>
<section id="sec-CallExpression" secid="3.2.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-CallExpression">3.2.1</a></span>CallExpression</h4>
</section>
</section>
</section>
<section id="sec-DetourLib" secid="4">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-DetourLib">4</a></span>DetourLib</h2>
<p>The Babel transformation plugin wraps all function declarations and expressions in detouring functions, and the detour library is a collection of function hooks designed to detour specific types of functions.</p>
<p>Detour functions insert a hooking function which replaces the original function with a special invocation adapter. Upon invoking the adapter a new HertzScript virtual machine is started in&#8208;place, and the original function is run from within it. The original function is assigned to a Symbol property named <code>tokenSym</code>. Each hooking function marks the detour function and original function with special marker Symbols which allow the virtual machine to observe information which would originally only be visible at compile&#8208;time.</p>
<p>The below figure illustrates the path of control flow from a caller function to the original function after it has been detoured.</p>
<p><img src="http://g.gravizo.com/svg?%0A%09digraph%20Components%20%7B%0A%09%09Caller%20%5Bshape=circle%5D;%0A%09%09Detour%20%5Bshape=box%5D;%0A%09%09VirtualMachine%20%5Bshape=box%5D;%0A%09%09tokenSym%20%5Bshape=box%5D;%0A%09%09Function%20%5Bshape=box%5D;%0A%09%09VirtualMachine%20%5Bshape=box%5D;%0A%09%09Caller%20-%3E%20Detour;%0A%09%09Detour%20-%3E%20tokenSym%20%5Bstyle=dotted%5D%20%5Barrowhead=empty%5D;%0A%09%09Detour%20-%3E%20VirtualMachine;%0A%09%09VirtualMachine%20-%3E%20tokenSym;%0A%09%09tokenSym%20-%3E%20Function;%0A%09%09%7B%0A%09%09%09rank=same;%20Caller%20Detour%20VirtualMachine;%0A%09%09%7D%0A%09%09%7B%0A%09%09%09rank=same;%20tokenSym%20Function%0A%09%09%7D%0A%09%7D%0A" alt="Component Diagram"/></p>
<section id="sec-Detour-Hooking-Functions" secid="4.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Detour-Hooking-Functions">4.1</a></span>Detour Hooking Functions</h3>
<p>Name|Arguments|Description -------------------------- <code>hookCoroutine</code> | | Detours a function. <code>hookArrowCoroutine</code> detours an <code>ArrowFunctionExpression</code>. <code>hookGenerator</code> detours a <code>GeneratorFunction</code>. <code>hookIterator</code> detours an iterator interface object&rsquo;s <code>next</code>, <code>return</code>, and <code>throw</code> methods.</p>
</section>
</section>
<section id="sec-Kernelizer" secid="5">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Kernelizer">5</a></span>Kernelizer</h2>
<p>The <code>Kernelizer</code> class is a very simple object which assigns arbitrary values directly to itself. This class serves as the base class for the <code>InstructionToken</code> class.</p>
<p>Strings given as an argument list to the constructor indicate the labels of arguments given in an Array via the <code>set</code> method, and can be reset with an arbitrary value via the <code>reset</code> method.</p>
<section id="sec-Kernelizer.Constructor" secid="5.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Kernelizer.Constructor">5.1</a></span>Constructor</h3>
<p>Assigns undefined to all properties ordered via an argument list of Strings spread to Array <code>argsArray</code>.</p>
<p>Kernelizer(...argsArrray) :</p>
<ol>
<li>Let property <code>argSlots</code> of <code>this</code> be <code>argsArray</code>.</li>
<li>Invoke <code>this.reset()</code>.</li>
</ol>
</section>
<section id="sec-Prototype-Methods" secid="5.2">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Prototype-Methods">5.2</a></span>Prototype Methods</h3>
<section id="sec-reset" secid="5.2.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-reset">5.2.1</a></span>reset</h4>
<p>Assigns an arbitrary value <code>resetValue</code> to all properties ordered via Strings in Array <code>this.argSlots</code>.</p>
<p>Kernelizer.prototype.reset(resetValue) :</p>
<ol>
<li>If <code>this.argSlots.length</code> is strictly equal to Number <code>0</code>, then<ul>
<li>Return <code>this</code>.</li>
</ul>
</li>
<li>For each <code>argName</code> of Array <code>this.argSlots</code>, do<ul>
<li>Let dynamic property <code>argName</code> of <code>this</code> be <code>resetValue</code>.</li>
</ul>
</li>
<li>Return <code>this</code>.</li>
</ol>
</section>
<section id="sec-set" secid="5.2.2">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-set">5.2.2</a></span>set</h4>
<p>Assigns arbitrary values in Array <code>argsArray</code> to properties ordered via Strings in Array <code>this.argSlots</code></p>
<p>Kernelizer.prototype.set(argsArray) :</p>
<ol>
<li>If <code>this.argSlots.length</code> is strictly equal to Number <code>0</code>, then<ul>
<li>Return <code>this</code>.</li>
<li>Let <code>loc</code> be Number <code>0</code>.</li>
</ul>
</li>
<li>For each <code>argName</code> of <code>this.argSlots</code>, do<ul>
<li>If Number <code>loc</code> is less than or equal to Number <code>argsArray.length</code>, then<ul>
<li>Let dynamic property <code>argName</code> of <code>this</code> be the value of dynamic property <code>loc</code> of <code>argsArray</code>.</li>
</ul>
</li>
<li>Else let dynamic property <code>argName</code> of <code>this</code> be undefined.</li>
<li>Increment Number <code>loc</code> by Number <code>1</code>.</li>
</ul>
</li>
<li>Return <code>this</code>.</li>
</ol>
</section>
</section>
</section>
<section id="sec-InstructionToken" secid="6">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-InstructionToken">6</a></span>InstructionToken</h2>
<p>The <code>InstructionToken</code> class extends the <code>Kernelizer</code> class by assigning String <code>type</code> and Symbol <code>kernSym</code> to itself.</p>
<section id="sec-InstructionToken.Constructor" secid="6.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-InstructionToken.Constructor">6.1</a></span>Constructor</h3>
<p>InstructionToken(type, kernSym, ...argsArrray) :</p>
<ol>
<li>Let <code>kern</code> be a new instance of class <code>Kernelizer</code>.</li>
<li>Let property <code>type</code> of <code>kern</code> be <code>type</code>.</li>
<li>Let dynamic property <code>kernSym</code> of <code>kern</code> be Boolean <code>true</code>.</li>
<li>Return <code>kern</code>.</li>
</ol>
</section>
</section>
<section id="sec-TokenLib" secid="7">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-TokenLib">7</a></span>TokenLib</h2>
<p><code>TokenLib</code> is a class which creates and contains <code>InstructionToken</code> instances and marker Symbols.</p>
<p><code>InstructionToken</code> instances are designed to safely encapsulate userspace data such as functions and their input operands, return/yield values, or no data. All <code>InstructionToken</code> instances are marked by having a special symbol assigned to them called <code>kernSym</code>; if <code>VirtualMachine</code> determines that an object has the symbol as a property, then it assumes that the object is an <code>InstructionToken</code> and attempts to process it.</p>
<p>Each <code>InstructionToken</code> is a single&#8208;instance uniqueness type to reduce memory overhead, because all instances are gauranteed to be thread&#8208;safe and free of race conditions. Because the virtual machine executes in a single thread, each unique <code>InstructionToken</code> instance will be used atomically during a single <code>VirtualMachine</code> fetch&#8208;decode&#8208;execute cycle.</p>
<section id="sec-Object-Methods" secid="7.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Object-Methods">7.1</a></span>Object Methods</h3>
<section id="sec-isKernelized" secid="7.1.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-isKernelized">7.1.1</a></span>isKernelized</h4>
<p>Returns a Boolean which indicates whether or not <code>input</code> is an Object instance of either the <code>InstructionToken</code> class or the <code>Kernelizer</code> class.</p>
<div class="spec-algo" id="isKernelized()">
<span class="spec-call"><a href="#isKernelized()" data-name="isKernelized">isKernelized</a>(<var data-name="input">input</var>)</span><ol>
<li>If the result of unary expression <code>typeof</code> with argument <code>input</code> is strictly equal to <code>&quot;object&quot;</code>, then<ol>
<li>Return the result of searching for property <code>@@kernSym</code> in <code>input</code>.</li>
</ol>
</li>
<li>Else return Boolean <code>false</code>.</li>
</ol>
</div>
</section>
</section>
<section id="sec-Object-Properties" secid="7.2">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Object-Properties">7.2</a></span>Object Properties</h3>
<section id="sec-tokens" secid="7.2.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-tokens">7.2.1</a></span>tokens</h4>
<table>
<thead><tr>
<th>Name</th>
<th>Arguments</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>loopYield</code> </td><td>None </td><td>Yield control flow to <code>VirtualMachine</code>.</td></tr>
<tr>
<td><code>call</code> </td><td>Array&lt; Function <code>functor</code>, Boolean <code>isTailCall</code> &gt; </td><td>Invoke a function.</td></tr>
<tr>
<td><code>callArgs</code> </td><td>Array&lt; Function <code>functor</code>, Array <code>args</code>, Boolean <code>isTailCall</code> &gt; </td><td>Invoke a function with arguments.</td></tr>
<tr>
<td><code>callMethod</code> </td><td>Array&lt; Object <code>object</code>, Any <code>property</code>, Boolean <code>isTailCall</code> &gt; </td><td>Invoke an Object method function.</td></tr>
<tr>
<td><code>callMethodArgs</code> </td><td>Object <code>object</code>, Any <code>property</code>, Array <code>args</code>, Boolean <code>isTailCall</code> &gt; </td><td>Invoke an Object method function with arguments.</td></tr>
<tr>
<td><code>new</code> </td><td>Array&lt; Function <code>functor</code> &gt; </td><td>Invoke a constructor.</td></tr>
<tr>
<td><code>newArgs</code> </td><td>Array&lt; Function <code>functor</code>, Array <code>args</code> &gt; </td><td>Invoke a constructor with arguments.</td></tr>
<tr>
<td><code>newMethod</code> </td><td>Array&lt; Object <code>object</code>, Any <code>property</code> &gt; </td><td>Invoke a constructor Object method function.</td></tr>
<tr>
<td><code>newMethodArgs</code> </td><td>Array&lt; Object <code>object</code>, Any <code>property</code>, Array <code>args</code> &gt; </td><td>Invoke a constructor Object method function with arguments.</td></tr>
<tr>
<td><code>spawn</code> </td><td>Array&lt; Function <code>functor</code> &gt; </td><td>Queue a coroutine for later execution.</td></tr>
<tr>
<td><code>spawnArgs</code> </td><td>Array&lt; Function <code>functor</code>, Array <code>args</code> &gt; </td><td>Queue a coroutine for later execution with arguments.</td></tr>
<tr>
<td><code>spawnMethod</code> </td><td>Array&lt; Object <code>object</code>, Any <code>property</code> &gt; </td><td>Queue an Object method coroutine for later execution.</td></tr>
<tr>
<td><code>spawnMethodArgs</code> </td><td>Array&lt; Object <code>object</code>, Any <code>property</code>, Array <code>args</code> &gt; </td><td>Queue an Object method coroutine for later execution with arguments.</td></tr>
<tr>
<td><code>return</code> </td><td>None </td><td>Perform a <code>return</code> statement.</td></tr>
<tr>
<td><code>returnValue</code> </td><td>Array&lt; Any <code>arg</code> &gt; </td><td>Perform a <code>return</code> statement with a value.</td></tr>
<tr>
<td><code>yield</code> </td><td>None </td><td>Perform a <code>yield</code> expression.</td></tr>
<tr>
<td><code>yieldValue</code> </td><td>Array&lt; Any <code>arg</code> &gt; </td><td>Perform a <code>yield</code> expression with a value.</td></tr>
</tbody>
</table>
</section>
<section id="sec-symbols" secid="7.2.2">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-symbols">7.2.2</a></span>symbols</h4>
<table>
<thead><tr>
<th>Name</th>
<th>Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>tokenSym</code> </td><td>Function </td><td>Is assigned to the userspace Function of a coroutine.</td></tr>
<tr>
<td><code>crtSym</code> </td><td>Any </td><td>Marks the function it is assigned to as being a coroutine.</td></tr>
<tr>
<td><code>conSym</code> </td><td>Any </td><td>Marks the function it is assigned to as being coroutine.</td></tr>
<tr>
<td><code>genSym</code> </td><td>Any </td><td>Marks the function it is assigned to as being generator.</td></tr>
<tr>
<td><code>iterSym</code> </td><td>Any </td><td>Marks the function it is assigned to as being assigned to an iterator interface object.</td></tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="sec-UserLib" secid="8">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-UserLib">8</a></span>UserLib</h2>
</section>
<section id="sec-VirtualMachine" secid="9">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-VirtualMachine">9</a></span>VirtualMachine</h2>
<p>To facilitate the aforementioned instruction stream transformations while preserving normal JavaScript execution, the HertzScript virtual machine implements the behaviors indicated by the instruction set and executes the compiled source code. The HertzScript virtual machine is written in regular JavaScript and executes within the JavaScript virtual machine userspace.</p>
<p>The HertzScript virtual machine consumes instruction tokens and performs the operations indicated by them. The HertzScript virtual machine changes how the JavaScript virtual machine call stack is utilized. When a new coroutine is started, a new Coroutine Control Block is created for it which contains a virtual call stack, and the HertzScript instruction set corresponds with operations which push and pop the coroutines in that stack. Only the currently executing coroutine will reside within the JavaScript VM call stack.</p>
<p>The JavaScript VM call stack does not grow past the currently running coroutine except during function calls which were initiated by many of JavaScript&rsquo;s standard operators which are not the invocation operator, loosely limiting the VM call stack to a set length. The end result of this size reduction is that all coroutines are generally able to perform a context switch with <code>O(1)</code> time complexity, significantly reducing any possible jitter that would critically impact multitasking operation.</p>
</section>
<section id="sec-Dispatcher" secid="10">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Dispatcher">10</a></span>Dispatcher</h2>
<p>The HertzScript dispatcher is a concurrency control system and preemptive multitasking kernel. The dispatcher is responsible for the supervision, scheduling, dispatchment, preemption, and context switching of multiple different HertzScript virtual machines within a single thread.</p>
</section>
<section id="sec-Programming-Environment" secid="11">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Programming-Environment">11</a></span>Programming Environment</h2>
<p>TBD </p>
</section>
<section id="index" secid="index" class="spec-index"><h1><span class="spec-secid" title="link to the index"><a href="#index">§</a></span>Index</h1><ol><li><a href="#isKernelized()">isKernelized</a></li></ol></section></article>
<footer>
Written in <a href="https://spec-md.com" target="_blank">Spec Markdown</a>.</footer>
<input hidden class="spec-sidebar-toggle" type="checkbox" id="spec-sidebar-toggle" aria-hidden /><label for="spec-sidebar-toggle" aria-hidden>&#x2630;</label>
<div class="spec-sidebar" aria-hidden>
<div class="spec-toc">
<div class="title"><a href="#">HertzScript Systems Specification</a></div>
<ol><li id="_sidebar_1"><a href="#sec-High-Level-Synopsis"><span class="spec-secid">1</span>High-Level Synopsis</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_1" /><label for="_sidebar_toggle_1"></label>
<ol>
<li id="_sidebar_1.1"><a href="#sec-Overview-of-Components"><span class="spec-secid">1.1</span>Overview of Components</a></li>
</ol>
</li>
<li id="_sidebar_2"><a href="#sec-Literal-Value-Data-Types"><span class="spec-secid">2</span>Literal Value Data Types</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_2" /><label for="_sidebar_toggle_2"></label>
<ol>
<li id="_sidebar_2.1"><a href="#sec-Notational-Conventions"><span class="spec-secid">2.1</span>Notational Conventions</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_2.1" /><label for="_sidebar_toggle_2.1"></label>
<ol>
<li id="_sidebar_2.1.1"><a href="#sec-Object"><span class="spec-secid">2.1.1</span>Object</a></li>
<li id="_sidebar_2.1.2"><a href="#sec-Symbol"><span class="spec-secid">2.1.2</span>Symbol</a></li>
<li id="_sidebar_2.1.3"><a href="#sec-String"><span class="spec-secid">2.1.3</span>String</a></li>
<li id="_sidebar_2.1.4"><a href="#sec-Boolean"><span class="spec-secid">2.1.4</span>Boolean</a></li>
<li id="_sidebar_2.1.5"><a href="#sec-Integer"><span class="spec-secid">2.1.5</span>Integer</a></li>
<li id="_sidebar_2.1.6"><a href="#sec-Float"><span class="spec-secid">2.1.6</span>Float</a></li>
<li id="_sidebar_2.1.7"><a href="#sec-Null"><span class="spec-secid">2.1.7</span>Null</a></li>
<li id="_sidebar_2.1.8"><a href="#sec-Undefined"><span class="spec-secid">2.1.8</span>Undefined</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3"><a href="#sec-Compiler"><span class="spec-secid">3</span>Compiler</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_3" /><label for="_sidebar_toggle_3"></label>
<ol>
<li id="_sidebar_3.1"><a href="#sec-Transformation-Functions"><span class="spec-secid">3.1</span>Transformation Functions</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_3.1" /><label for="_sidebar_toggle_3.1"></label>
<ol>
<li id="_sidebar_3.1.1"><a href="#sec-HzCoroutine"><span class="spec-secid">3.1.1</span>HzCoroutine</a></li>
</ol>
</li>
<li id="_sidebar_3.2"><a href="#sec-Visitor-Functions"><span class="spec-secid">3.2</span>Visitor Functions</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_3.2" /><label for="_sidebar_toggle_3.2"></label>
<ol>
<li id="_sidebar_3.2.1"><a href="#sec-CallExpression"><span class="spec-secid">3.2.1</span>CallExpression</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_4"><a href="#sec-DetourLib"><span class="spec-secid">4</span>DetourLib</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_4" /><label for="_sidebar_toggle_4"></label>
<ol>
<li id="_sidebar_4.1"><a href="#sec-Detour-Hooking-Functions"><span class="spec-secid">4.1</span>Detour Hooking Functions</a></li>
</ol>
</li>
<li id="_sidebar_5"><a href="#sec-Kernelizer"><span class="spec-secid">5</span>Kernelizer</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5" /><label for="_sidebar_toggle_5"></label>
<ol>
<li id="_sidebar_5.1"><a href="#sec-Kernelizer.Constructor"><span class="spec-secid">5.1</span>Constructor</a></li>
<li id="_sidebar_5.2"><a href="#sec-Prototype-Methods"><span class="spec-secid">5.2</span>Prototype Methods</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5.2" /><label for="_sidebar_toggle_5.2"></label>
<ol>
<li id="_sidebar_5.2.1"><a href="#sec-reset"><span class="spec-secid">5.2.1</span>reset</a></li>
<li id="_sidebar_5.2.2"><a href="#sec-set"><span class="spec-secid">5.2.2</span>set</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_6"><a href="#sec-InstructionToken"><span class="spec-secid">6</span>InstructionToken</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_6" /><label for="_sidebar_toggle_6"></label>
<ol>
<li id="_sidebar_6.1"><a href="#sec-InstructionToken.Constructor"><span class="spec-secid">6.1</span>Constructor</a></li>
</ol>
</li>
<li id="_sidebar_7"><a href="#sec-TokenLib"><span class="spec-secid">7</span>TokenLib</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_7" /><label for="_sidebar_toggle_7"></label>
<ol>
<li id="_sidebar_7.1"><a href="#sec-Object-Methods"><span class="spec-secid">7.1</span>Object Methods</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_7.1" /><label for="_sidebar_toggle_7.1"></label>
<ol>
<li id="_sidebar_7.1.1"><a href="#sec-isKernelized"><span class="spec-secid">7.1.1</span>isKernelized</a></li>
</ol>
</li>
<li id="_sidebar_7.2"><a href="#sec-Object-Properties"><span class="spec-secid">7.2</span>Object Properties</a>
<input hidden class="toggle" type="checkbox" id="_sidebar_toggle_7.2" /><label for="_sidebar_toggle_7.2"></label>
<ol>
<li id="_sidebar_7.2.1"><a href="#sec-tokens"><span class="spec-secid">7.2.1</span>tokens</a></li>
<li id="_sidebar_7.2.2"><a href="#sec-symbols"><span class="spec-secid">7.2.2</span>symbols</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_8"><a href="#sec-UserLib"><span class="spec-secid">8</span>UserLib</a></li>
<li id="_sidebar_9"><a href="#sec-VirtualMachine"><span class="spec-secid">9</span>VirtualMachine</a></li>
<li id="_sidebar_10"><a href="#sec-Dispatcher"><span class="spec-secid">10</span>Dispatcher</a></li>
<li id="_sidebar_11"><a href="#sec-Programming-Environment"><span class="spec-secid">11</span>Programming Environment</a></li>
<li id="_sidebar_index"><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</div>
<script>(function(){for(var e,t=[],n=document.getElementsByTagName("section"),o=0;o<n.length;o++)n[o].getAttribute("secid")&&t.push(n[o]);var i=window.scrollY,r=!1;function c(n){for(var o,i=n+document.documentElement.clientHeight/4,r=t.length-1;r>=0;r--)if(t[r].offsetTop<i){o=t[r];break}var c=o&&o.getAttribute("secid");c!==e&&(e&&d(e,!1),c&&d(c,!0),e=c)}function d(e,t){document.getElementById("_sidebar_"+e).className=t?"viewing":"";for(var n=e.split(".");n.length;){var o=document.getElementById("_sidebar_toggle_"+n.join("."));o&&(o.checked=t),n.pop()}}window.addEventListener("scroll",(function(e){i=window.scrollY,r||(r=!0,window.requestAnimationFrame((function(){c(i),r=!1})))})),c(window.scrollY);})()</script>
</div>
</body>
</html>
